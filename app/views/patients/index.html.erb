
<h1>Patients</h1>

<table id="dtMaterialDesignExample" class="table table-striped table-bordered" cellspacing="0" width="100%">
  <thead>
    <tr>
      <th>患者姓名</th>
      <th>Phone</th>
      <th>Sex</th>
      <th>Sickhistory</th>
      <th>Maindoctor</th>
      <th>操作</th>
    </tr>
  </thead>

  <tbody>
    <% @patients.each do |patient| %>
      <tr>
        <td><%= patient.name %></td>
        <td><%= patient.phone %></td>
        <td><%= patient.sex %></td>
        <td><%= patient.sickHistory %></td>
        <td><%= patient.mainDoctor %></td>
        <td><%= link_to 'Show', patient, class:'btn btn-primary btn-sm' %></td>

      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to 'New Patient', new_patient_path %>

<script>
    function onReady() {
        setTimeout(
            function()
            {
                $('#dtMaterialDesignExample').DataTable({
                    "pagingType": "full_numbers",
                    "autoWidth": true,
                    "order": [[ 2, "desc" ]]
                    }
                );
                $('#dtMaterialDesignExample_wrapper').find('label').each(function () {
                    $(this).parent().append($(this).children());
                });
                $('#dtMaterialDesignExample_wrapper .dataTables_filter').find('input').each(function () {
                    $('input').attr("placeholder", "Search");
                    $('input').removeClass('form-control-sm');
                });
                $('#dtMaterialDesignExample_wrapper .dataTables_length').addClass('d-flex flex-row');
                $('#dtMaterialDesignExample_wrapper .dataTables_filter').addClass('md-form');
                $('#dtMaterialDesignExample_wrapper select').removeClass(
                    'custom-select custom-select-sm form-control form-control-sm');
                $('#dtMaterialDesignExample_wrapper select').addClass('mdb-select');
                $('#dtMaterialDesignExample_wrapper .mdb-select').materialSelect();
                $('#dtMaterialDesignExample_wrapper .dataTables_filter').find('label').remove();
            }, 100);
    }
    onReady()
</script>